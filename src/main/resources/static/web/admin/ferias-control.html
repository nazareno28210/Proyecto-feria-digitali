<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Ferias - Panel Admin</title>
    <link rel="icon" href="/web/assets/logo.png" />
    <link rel="stylesheet" href="/web/css/global.css">
    <link rel="stylesheet" href="/web/css/ferias-control.css"> 
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<header>
    <div class="header-top">
        <div class="header-left">
            <a href="/web/ferias.html" class="header-logo-link">
                <img src="/web/assets/logo.png" alt="Logo Feria Digital" class="header-logo" />
            </a>
            <h1>Gestión de Ferias</h1>
        </div>
        <div class="header-right">
            <a href="/web/admin/dashboard.html" class="btn btn-header">← Volver al panel</a>
        </div>
    </div>
</header>

<main>
    <h2>Crear nueva feria</h2>
    <form id="form-feria" class="form-card">
        <div class="form-grid">
            <div class="form-column">
                <label for="nombre">Nombre de la Feria</label>
                <input type="text" id="nombre" placeholder="Ej: Feria Gastronómica 2026" required>
                
                <label for="lugar">Lugar / Dirección</label>
                <input type="text" id="lugar" placeholder="Ej: Plaza Central" required>

                <div class="coord-inputs">
                    <div>
                        <label for="latitud">Latitud</label>
                        <input type="text" id="latitud" placeholder="Clic en el mapa" readonly required>
                    </div>
                    <div>
                        <label for="longitud">Longitud</label>
                        <input type="text" id="longitud" placeholder="Clic en el mapa" readonly required>
                    </div>
                </div>
            </div>
            <div class="form-column">
                <label>Ubicación en el mapa (Haz clic para marcar)</label>
                <div id="mapa-crear" class="admin-map"></div>
            </div>
        </div>

        <div class="form-grid" style="margin-top: 20px;">
            <div class="form-column">
                <label for="fechaInicio">Fecha de Inicio</label>
                <input type="date" id="fechaInicio" required>
                
                <label for="fechaFinal">Fecha de Finalización</label>
                <input type="date" id="fechaFinal" required>
            </div>
            <div class="form-column">
                <label for="imagenUrl">URL de la Imagen (Portada)</label>
                <input type="text" id="imagenUrl" placeholder="https://ejemplo.com/imagen.jpg">

                <label for="descripcion">Descripción del Evento</label>
                <textarea id="descripcion" placeholder="Escribe una breve reseña de la feria..."></textarea>
            </div>
        </div>
        
        <button type="submit" class="btn-submit">Guardar Feria</button>
    </form>

    <h2>Ferias registradas</h2>
    <div class="table-container">
        <table id="tabla-ferias">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Lugar</th>
                    <th>Fechas</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</main>

<div id="modal-editar" class="modal">
    <div class="modal-content">
        <span class="close-button" onclick="cerrarModal()">&times;</span>
        <h2><i class="fas fa-edit"></i> Editar Feria</h2>
        <form id="form-editar">
            <input type="hidden" id="edit-id">
            
            <div class="form-grid">
                <div class="form-column">
                    <label for="edit-nombre">Nombre</label>
                    <input type="text" id="edit-nombre" required>
                    
                    <label for="edit-lugar">Lugar</label>
                    <input type="text" id="edit-lugar" required>

                    <div class="coord-inputs">
                        <div>
                            <label for="edit-latitud">Latitud</label>
                            <input type="text" id="edit-latitud" readonly required>
                        </div>
                        <div>
                            <label for="edit-longitud">Longitud</label>
                            <input type="text" id="edit-longitud" readonly required>
                        </div>
                    </div>
                </div>
                <div class="form-column">
                    <label>Modificar ubicación</label>
                    <div id="mapa-editar" class="admin-map"></div>
                </div>
            </div>

            <div class="form-grid">
                <div class="form-column">
                    <label for="edit-fechaInicio">Fecha Inicio</label>
                    <input type="date" id="edit-fechaInicio" required>
                </div>
                <div class="form-column">
                    <label for="edit-fechaFinal">Fecha Fin</label>
                    <input type="date" id="edit-fechaFinal" required>
                </div>
            </div>

            <label for="edit-imagenUrl">URL de Imagen</label>
            <input type="text" id="edit-imagenUrl">
            
            <label for="edit-descripcion">Descripción</label>
            <textarea id="edit-descripcion"></textarea>
            
            <button type="submit" class="btn-submit">Guardar Cambios</button>
        </form>
    </div>
</div>

<footer>
    <p>Proyecto Feria Digital — Panel de Administración de Software</p>
</footer>

<script src="/web/js/ferias-control.js"></script>
</body>
</html>